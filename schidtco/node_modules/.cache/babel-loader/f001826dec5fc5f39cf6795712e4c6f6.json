{"ast":null,"code":"var _regeneratorRuntime = require(\"/Users/schidtery/Desktop/schidtco/schidtco/schidtco/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nvar _asyncToGenerator = require(\"/Users/schidtery/Desktop/schidtco/schidtco/schidtco/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/asyncToGenerator\");\n\nvar axios = require('axios');\n\nvar _require = require('multiformats'),\n    CID = _require.CID;\n\nvar _require2 = require('../config'),\n    storageEndpoint = _require2.storageEndpoint;\n\nvar convertToV0CID = function convertToV0CID(v1) {\n  var formattedv1CID = v1.replace(/\\\"/g, '');\n  var c = CID.parse(formattedv1CID);\n  return c.toV0().toString();\n};\n\nvar hashFromKey = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(bucket, filename) {\n    var url, _yield$axios$head, v1CID, v0CID;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            url = \"\".concat(storageEndpoint, \"/\").concat(bucket, \"/\").concat(filename);\n            _context.prev = 1;\n            _context.next = 4;\n            return axios.head(url);\n\n          case 4:\n            _yield$axios$head = _context.sent;\n            v1CID = _yield$axios$head.headers.etag;\n            v0CID = convertToV0CID(v1CID);\n            return _context.abrupt(\"return\", v0CID);\n\n          case 10:\n            _context.prev = 10;\n            _context.t0 = _context[\"catch\"](1);\n            return _context.abrupt(\"return\", null);\n\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[1, 10]]);\n  }));\n\n  return function hashFromKey(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nmodule.exports = hashFromKey;","map":null,"metadata":{},"sourceType":"script"}