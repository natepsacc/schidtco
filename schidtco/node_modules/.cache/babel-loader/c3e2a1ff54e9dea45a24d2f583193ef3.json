{"ast":null,"code":"const axios = require('axios');\n\nconst {\n  CID\n} = require('multiformats');\n\nconst {\n  storageEndpoint\n} = require('../config');\n\nconst convertToV0CID = v1 => {\n  const formattedv1CID = v1.replace(/\\\"/g, '');\n  const c = CID.parse(formattedv1CID);\n  return c.toV0().toString();\n};\n\nconst hashFromKey = async (bucket, filename) => {\n  const url = `${storageEndpoint}/${bucket}/${filename}`;\n\n  try {\n    const {\n      headers: {\n        etag: v1CID\n      }\n    } = await axios.head(url);\n    const v0CID = convertToV0CID(v1CID);\n    return v0CID;\n  } catch (e) {\n    return null;\n  }\n};\n\nmodule.exports = hashFromKey;","map":{"version":3,"names":["axios","require","CID","storageEndpoint","convertToV0CID","v1","formattedv1CID","replace","c","parse","toV0","toString","hashFromKey","bucket","filename","url","headers","etag","v1CID","head","v0CID","e","module","exports"],"sources":["/Users/schidtery/Desktop/schidtco/schidtco/schidtco/node_modules/@fleekhq/fleek-storage-js/utils/get-hash-from-key.js"],"sourcesContent":["const axios = require('axios');\nconst { CID } = require('multiformats');\n\nconst { storageEndpoint } = require('../config');\n\nconst convertToV0CID = (v1) => {\n  const formattedv1CID = v1.replace(/\\\"/g, '');\n  const c = CID.parse(formattedv1CID);\n  return c.toV0().toString();\n};\n\nconst hashFromKey = async (bucket, filename) => {\n  const url = `${storageEndpoint}/${bucket}/${filename}`\n\n  try {\n    const { headers: { etag: v1CID } } = await axios.head(url);\n    const v0CID = convertToV0CID(v1CID);\n    return v0CID;\n  } catch(e) {\n    return null;\n  }\n}\n\nmodule.exports = hashFromKey;\n"],"mappings":"AAAA,MAAMA,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;;AACA,MAAM;EAAEC;AAAF,IAAUD,OAAO,CAAC,cAAD,CAAvB;;AAEA,MAAM;EAAEE;AAAF,IAAsBF,OAAO,CAAC,WAAD,CAAnC;;AAEA,MAAMG,cAAc,GAAIC,EAAD,IAAQ;EAC7B,MAAMC,cAAc,GAAGD,EAAE,CAACE,OAAH,CAAW,KAAX,EAAkB,EAAlB,CAAvB;EACA,MAAMC,CAAC,GAAGN,GAAG,CAACO,KAAJ,CAAUH,cAAV,CAAV;EACA,OAAOE,CAAC,CAACE,IAAF,GAASC,QAAT,EAAP;AACD,CAJD;;AAMA,MAAMC,WAAW,GAAG,OAAOC,MAAP,EAAeC,QAAf,KAA4B;EAC9C,MAAMC,GAAG,GAAI,GAAEZ,eAAgB,IAAGU,MAAO,IAAGC,QAAS,EAArD;;EAEA,IAAI;IACF,MAAM;MAAEE,OAAO,EAAE;QAAEC,IAAI,EAAEC;MAAR;IAAX,IAA+B,MAAMlB,KAAK,CAACmB,IAAN,CAAWJ,GAAX,CAA3C;IACA,MAAMK,KAAK,GAAGhB,cAAc,CAACc,KAAD,CAA5B;IACA,OAAOE,KAAP;EACD,CAJD,CAIE,OAAMC,CAAN,EAAS;IACT,OAAO,IAAP;EACD;AACF,CAVD;;AAYAC,MAAM,CAACC,OAAP,GAAiBX,WAAjB"},"metadata":{},"sourceType":"script"}